branches:
  only:
  - master
before_install:
- openssl aes-256-cbc -K $encrypted_9626480e6579_key -iv $encrypted_9626480e6579_iv
  -in deploy.pem.enc -out .travis/deploy.pem -d
before_script:
- eval `ssh-agent -s`
- chmod 600 .travis/deploy.pem
- ssh-add .travis/deploy.pem
- git clone git@github.com:dit4c/dit4c.github.io.git build && rm build/*
- npm install
script:
- ./generate
after_success:
- export GIT_AUTHOR_NAME=`git log -1 --format="format:%an"`
- export GIT_AUTHOR_EMAIL=`git log -1 --format="format:%ae"`
- cd build
- git config user.name "$GIT_AUTHOR_NAME"
- git config user.email "$GIT_AUTHOR_EMAIL"
- git add -A .
- git commit -m "Travis CI build"
